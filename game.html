<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SkyBurst Aviator Game</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap">
  <style>
    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      background: linear-gradient(to top, #0f2027, #203a43, #2c5364);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      overflow-x: hidden;
    }
    header {
      padding: 10px;
      font-size: 24px;
    }
    .game-area {
      position: relative;
      width: 90vw;
      max-width: 500px;
      height: 300px;
      border: 2px solid #fff;
      margin: 20px 0;
      overflow: hidden;
      background: radial-gradient(circle, #1a1a1a 0%, #000000 100%);
    }
    .ship {
      position: absolute;
      bottom: 0;
      left: 50%;
      width: 50px;
      height: 50px;
      background: url('https://cdn-icons-png.flaticon.com/512/187/187190.png') no-repeat center;
      background-size: contain;
      transform: translateX(-50%);
    }
    .controls, .balance-section, .buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }
    button {
      padding: 10px 20px;
      font-size: 18px;
      border: none;
      background: #ff4b2b;
      color: white;
      border-radius: 10px;
      cursor: pointer;
    }
    .balance-section {
      margin: 10px;
      font-size: 18px;
    }
    .coin-options {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 15px;
    }
    .coin {
      background: #444;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
    }
    .coin.active {
      background: #ff4b2b;
    }
    audio {
      display: none;
    }
  </style>
</head><body>
  <header>ðŸš€ SkyBurst Game</header>
  <div class="game-area" id="gameArea">
    <div class="ship" id="ship"></div>
  </div>  <div class="balance-section">
    <span>Balance: <span id="balance">0</span> coins</span>
  </div>  <div class="coin-options">
    <div class="coin" data-amount="10">10</div>
    <div class="coin" data-amount="20">20</div>
    <div class="coin" data-amount="50">50</div>
    <div class="coin" data-amount="100">100</div>
  </div>  <div class="buttons">
    <button onclick="startGame()">Start Game</button>
    <button onclick="recharge()">Cash In</button>
    <button onclick="withdraw()">Cash Out</button>
    <button onclick="refer()">Refer</button>
  </div><audio id="takeoff" src="https://assets.mixkit.co/sfx/preview/mixkit-spaceship-take-off-1686.mp3"></audio> <audio id="explode" src="https://assets.mixkit.co/sfx/preview/mixkit-explosion-1705.mp3"></audio>

  <script>
    const userId = '6825228721';
    const adminId = '6825228721';
    const supabaseUrl = 'https://omcaquhsmeqfhxpusawu.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9tY2FxdWhzbWVxZmh4cHVzYXd1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMyMTE2ODIsImV4cCI6MjA2ODc4NzY4Mn0.efl5MQ-lbY6kkeMujJQ8NDTLdc_7r_bkTj_AZzwcj4Y';

    const { createClient } = supabase;
    const db = createClient(supabaseUrl, supabaseKey);

    let selectedCoin = 10;
    document.querySelectorAll('.coin').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.coin').forEach(c => c.classList.remove('active'));
        btn.classList.add('active');
        selectedCoin = parseInt(btn.dataset.amount);
      });
    });

    async function getBalance() {
      let { data } = await db.from('skyburst_users').select('balance').eq('user_id', userId).single();
      document.getElementById('balance').innerText = data ? data.balance : 0;
    }

    async function updateBalance(change) {
      let { data } = await db.from('skyburst_users').select('*').eq('user_id', userId).single();
      let newBal = (data?.balance || 0) + change;
      if (data) {
        await db.from('skyburst_users').update({ balance: newBal }).eq('user_id', userId);
      } else {
        await db.from('skyburst_users').insert({ user_id: userId, balance: newBal });
      }
      getBalance();
    }

    async function recharge() {
      updateBalance(50);
      alert('50 coins added (simulated).');
    }

    async function withdraw() {
      let { data } = await db.from('skyburst_users').select('*').eq('user_id', userId).single();
      if ((data?.balance || 0) >= 100) {
        alert('Withdrawal request sent to admin.');
        updateBalance(-100);
      } else {
        alert('Minimum withdrawal is 100 coins.');
      }
    }

    async function refer() {
      const refUserId = prompt('Enter referral user ID:');
      if (refUserId && refUserId !== userId) {
        await updateBalance(5);
        await db.from('skyburst_users').select('*').eq('user_id', refUserId).then(res => {
          let bal = (res.data[0]?.balance || 0) + 20;
          db.from('skyburst_users').update({ balance: bal }).eq('user_id', refUserId);
        });
        alert('Referral bonus granted!');
      } else {
        alert('Invalid referral.');
      }
    }

    function startGame() {
      document.getElementById('takeoff').play();
      const ship = document.getElementById('ship');
      ship.style.bottom = '0';
      let pos = 0;
      const move = setInterval(() => {
        pos += 4;
        ship.style.bottom = pos + 'px';
        if (pos > 240) {
          clearInterval(move);
          const win = Math.random() < 0.5;
          if (win) {
            updateBalance(selectedCoin);
            alert('You won ' + selectedCoin + ' coins!');
          } else {
            document.getElementById('explode').play();
            updateBalance(-selectedCoin);
            alert('You lost ' + selectedCoin + ' coins.');
          }
          ship.style.bottom = '0';
        }
      }, 50);
    }

    getBalance();
  </script></body></html>
